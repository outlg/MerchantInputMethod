<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>员工</title>
</head>
<body style="background-color:#EFF0F4;">
<div>
    <img src="img.png" ;width="50px" ; height="50px" ; style="position:absolute; left:60px; top:20px; ">
</div>

<!..顶部白色色块..>
<div style="background-color: rgba(253, 253, 253, 100); width:1260px; height:50px;position:absolute; left:213px; top:20px;">
    <img src="img_11.png" ;width="30px" ; height="30px" ; style="position:absolute; left:1200px; top:10px; ">
    <p style="width: 100px;height: 20px;color: rgba(56, 58, 64, 100);font-size: 15px;position:absolute; left:50px; top:0px; ">首页 / 员工 / </p>
    <p style="width: 100px;height: 20px;color: gray;font-size: 15px;position:absolute; left:141px; top:0px; ">添加员工</p>

    <!..退出登录超链接..>
    <a href="Login.html"
       style="text-decoration: none;width:60px;height: 50px;line-height: 20px;color: blue;font-size: 15px;position:absolute; left:1110px;top:15px;" >退出登录</a>
</div>

<!..填写..>
<div style="background-color:white; width:1252px; height:620px;position:absolute; left:220px; top:80px;">
    <p style="width: 97px;height: 30px;color: rgba(16, 16, 16, 56);font-size: 17px;position:absolute; left:400px; top:30px;">姓名：</p>
    <p style="width: 97px;height: 30px;color: rgba(16, 16, 16, 56);font-size: 17px;position:absolute; left:400px; top:110px;">年龄：</p>
    <p style="width: 97px;height: 30px;color: rgba(16, 16, 16, 56);font-size: 17px;position:absolute; left:400px; top:190px;">性别：</p>
    <p style="width: 97px;height: 30px;color: rgba(16, 16, 16, 56);font-size: 17px;position:absolute; left:400px; top:270px;">职位：</p>
    <p style="width: 97px;height: 30px;color: rgba(16, 16, 16, 56);font-size: 17px;position:absolute; left:400px; top:350px;">邮箱：</p>

    <input id="text1" type="text" placeholder="输入姓名" style="width: 300px;height: 25px;color: rgba(136, 136, 136, 100);font-size: 14px;text-align: left;position:absolute; left:480px; top:45px;"/>
    <input id="text2" type="text" placeholder="输入年龄" style="width: 300px;height: 25px;color: rgba(136, 136, 136, 100);font-size: 14px;text-align: left;position:absolute; left:480px; top:125px;"/>
    <input id="text3" type="text" placeholder="输入邮箱" style="width: 300px;height: 25px;color: rgba(136, 136, 136, 100);font-size: 14px;text-align: left;position:absolute; left:480px; top:365px;"/>
    <select id="text4"  style="width: 308px;height: 30px;color: rgba(136, 136, 136, 100);font-size: 14px;text-align: left;position:absolute; left:480px; top:285px;">
        <option>普通员工</option>
        <option>公司管理员</option>
    </select>

    <input type="radio" name="sex" id="text5" value="男" style="position:absolute; left:475px; top:210px;"/><label style="position:absolute; left:500px; top:210px;font-size: 14px;">男</label>
    <input type="radio" name="sex" id="text6" value="女"  style="position:absolute; left:550px; top:210px;"/> <label style="position:absolute; left:575px; top:210px;font-size: 14px;">女</label>

    <button style="width: 60px;height: 30px;border: 1px solid rgba(187, 187, 187, 100);background-color: rgba(27, 10, 242, 100);color: rgba(255, 255, 255, 100);font-size: 14px;text-align: center;position:absolute; left:500px; top:470px;"onclick="addyuangong()">添加</button>
    <button style="width: 60px;height: 30px;border: 1px solid rgba(187, 187, 187, 100);color: rgba(16, 16, 16, 100);font-size: 14px;text-align: center;position:absolute; left:650px; top:470px;" onclick="creset()" >取消</button>
</div>


<!..左边黑色色块..>
<div style="background-color:#2D3A4B; width:153px; height:700px;position:absolute; left:60px; top:70px;">


    <summary onclick="aaa()" style="color:white;left:10px; top:10px;padding-left:55px;padding-top:25px;" >话术</summary>
    <div id="block1" style="padding-left:50px;">
        <p style="padding-top:-5px;"> <a id="l1" style="font-size: 10px;color: rgba(222, 225, 232, 100);text-decoration: none;"  href="#">话术列表</a></p>
        <p style="padding-top:-5px;"><a id="l2" style="font-size: 10px;color: rgba(222, 225, 232, 100);text-decoration: none;" href="huashu2.html">添加话术</a></p>
        <p style="padding-top:-5px;"> <a id="l3" style="font-size: 10px;color: rgba(222, 225, 232, 100);text-decoration: none;" href="huashu3.html">审核话术</a></p>
    </div>
    <summary onclick="aaa2()" style="color:white;left:10px; top:10px;padding-left:55px;padding-top:25px;" >商品</summary>
    <div id="block2" style="padding-left:50px;">
        <p style="padding-top:-5px;"> <a id="l4" style="font-size: 10px;color: rgba(222, 225, 232, 100);text-decoration: none;"  href="#">商品列表</a></p>
        <p style="padding-top:-5px;"><a id="l5" style="font-size: 10px;color: rgba(222, 225, 232, 100);text-decoration: none;" href="huashu2.html">添加商品</a></p>
        <p style="padding-top:-5px;"> <a id="l6" style="font-size: 10px;color: rgba(222, 225, 232, 100);text-decoration: none;" href="huashu3.html">审核商品</a></p>
    </div>
    <summary onclick="aaa3()" style="color:white;left:10px; top:10px;padding-left:55px;padding-top:25px;" >员工</summary>
    <div id="block3" style="padding-left:50px;">
        <p style="padding-top:-5px;"> <a id="l7" style="font-size: 10px;color: rgba(222, 225, 232, 100);text-decoration: none;"  href="yuangong1.html">员工列表</a></p>
        <p  style="padding-top:-5px;"><a id="l8" style="font-size: 10px;color: rgba(222, 225, 232, 100);text-decoration: none;" href="#">添加员工</a></p>
    </div>
    <summary style="color:white;left:10px; top:10px;padding-left:40px;padding-top:25px;" ><a style="font-size: 15px;color: white;text-decoration: none;" href="person.html">个人中心</a></summary>



</div>

</body>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.12.3.min.js"></script>
<script type="text/javascript"></script>
<script>
    document.getElementById("l8").style.color="#409EFF";
    var aa=0;
    var aa2=0;
    var aa3=0;
    function aaa2(){
        if(aa2==1){
            aa2=0;
            document.getElementById("block2").style.display="block";
        }
        else{
            document.getElementById("block2").style.display="none";
            aa2=1;
        }

    }
    function aaa(){
        if(aa==1){
            aa=0;
            document.getElementById("block1").style.display="block";
        }
        else{
            document.getElementById("block1").style.display="none";
            aa=1;
        }

    }

    function aaa3(){
        if(aa3==1){
            aa3=0;
            document.getElementById("block3").style.display="block";
        }
        else{
            document.getElementById("block3").style.display="none";
            aa3=1;
        }

    }
   function creset(){
       document.getElementById("text1").value="";
       document.getElementById("text2").value="";
       document.getElementById("text3").value="";
       document.getElementById("text4").value="普通员工";
       var which_sex = document.getElementsByName("sex");
       for(var i=0;i<2;i++){
           if(which_sex[i].checked){
               which_sex[i].checked=false;
           }
       }

   }
    var useremail=getCookie("user_email");
function addyuangong(){
       var sex="";
       var which_sex = document.getElementsByName("sex");
       for(var i=0;i<2;i++){
           if(which_sex[i].checked){
               sex=which_sex[i].value;
           }
       }
       var name=document.getElementById("text1").value;
       var age=document.getElementById("text2").value;
       var email=document.getElementById("text3").value;
       var work=document.getElementById("text4").value;
       var asex={"男":1,"女":2};
       var awork={"普通员工":3,"公司管理员":2};
       var data={"email":useremail,"employee_email":email,"username":name,"age":age,"gender":asex[sex],"identity":awork[work]};
       var httpRequest = new XMLHttpRequest();//第一步：建立所需的对象
       httpRequest.open("POST", "http://localhost:8088/workers/addWorkers", true);  //调用AddDataToServer
       httpRequest.setRequestHeader("Content-type", "application/JSON"); //设置请求头信
       httpRequest.send(JSON.stringify(data)); //设置为发送给服务器数据
       //回调函数，获取返回数据

       httpRequest.onreadystatechange = function() {
           if (httpRequest.readyState == 4) {
               //根据服务器的响应内容格式处理响应结果
               if(httpRequest.getResponseHeader('content-type')==='application/json'){
                   var result = JSON.parse(httpRequest.responseText);
                   //根据返回结果判断验证码是否正确
                   if(result["code"]===7007){
                       window.alert('添加成功');
                       creset();
                   }
                   else {
                       window.alert('添加失败，可能已存在');
                   }

               }
           }
       }



   }

    function getCookie(cookie_name) {
        var allcookies = document.cookie;

        var cookie_pos = allcookies.indexOf(cookie_name);

        if (cookie_pos !== -1) {
            cookie_pos = cookie_pos + cookie_name.length + 1;
            var cookie_end = allcookies.indexOf(";", cookie_pos);
            if (cookie_end === -1) {
                cookie_end = allcookies.length;
            }
            var value = unescape(allcookies.substring(cookie_pos, cookie_end));
        }
        return value;
    }


</script>
</html>